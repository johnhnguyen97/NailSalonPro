@import '../../../styles/mixins'
@import '../../../styles/grid-mixins'

.calendar-container
  @include card-container

  mat-card
    @include base-card
    @include grid-container

    .calendar-header
      flex-shrink: 0
      padding: var(--spacing-md) var(--spacing-lg)
      border-bottom: 1px solid var(--border-color)
      background: white

      .calendar-controls
        display: flex
        align-items: center
        gap: var(--spacing-lg)
        height: 42px

        .view-controls
          .mat-button-toggle-group
            height: 32px
            
            .mat-button-toggle
              line-height: 32px
              font-size: var(--font-size-xs)
              padding: 0 var(--spacing-md)

        .nav-section
          display: flex
          align-items: center
          gap: var(--spacing-sm)

          button
            width: 32px
            height: 32px
            line-height: 32px

          .current-date
            font-size: var(--font-size-sm)
            min-width: 120px
            text-align: center

        .actions-section
          margin-left: auto
          display: flex
          align-items: center
          gap: var(--spacing-md)

          .timezone-select
            .dense-field
              width: 160px
              margin-bottom: -1.25em // Compensate for form field spacing

              ::ng-deep
                .mat-mdc-form-field-infix
                  padding: 8px 0
                  min-height: 32px
                
                .mat-mdc-select-value
                  font-size: var(--font-size-xs)

                .mat-mdc-form-field-subscript-wrapper
                  display: none

          .new-appointment-btn
            height: 32px
            padding: 0 var(--spacing-md)
            font-size: var(--font-size-xs)

            mat-icon
              font-size: 18px
              height: 18px
              width: 18px
              margin-right: 4px

    .calendar-content
      @include grid-body
      padding: var(--spacing-lg)
      display: flex
      flex-direction: column

      .calendar-grid
        @include calendar-grid
        flex: 1
        min-height: 0

        .calendar-header
          @include calendar-header
          height: 36px

          .header-cell
            font-size: var(--font-size-xs)
            padding: var(--spacing-xs)
            height: 36px

            &.time-header
              background: var(--background-light)
              border-right: 1px solid var(--border-color)

        .calendar-body
          @include calendar-body

          .time-slots
            border-right: 1px solid var(--border-color)
            background: var(--background-light)
            flex-shrink: 0
            width: 60px

            .time-slot
              @include time-cell
              font-size: var(--font-size-xs)
              height: 50px
              padding: var(--spacing-xs)
              border-right: none

          .week-grid
            display: grid
            grid-template-columns: repeat(7, 1fr)
            overflow-y: auto
            @include hide-scrollbar
            min-height: 0

            .day-column
              border-right: 1px solid var(--border-color)
              min-width: 0

              &:last-child
                border-right: none

              .time-slot
                @include appointment-slot
                height: 50px

                .appointments
                  position: absolute
                  inset: 1px
                  padding: 1px

                  .appointment
                    background: var(--background-lighter)
                    border-radius: 4px
                    padding: var(--spacing-xs)
                    height: calc(100% - 2px)
                    font-size: var(--font-size-xs)
                    cursor: pointer
                    transition: background-color 0.2s ease

                    &:hover
                      background: var(--hover-color)

                    .appointment-content
                      display: flex
                      flex-direction: column
                      gap: 2px
                      height: 100%
                      overflow: hidden

                      .time
                        font-weight: var(--font-weight-medium)
                        color: var(--text-secondary)
                        font-size: 10px

                      .title
                        white-space: nowrap
                        overflow: hidden
                        text-overflow: ellipsis
                        font-size: var(--font-size-xs)

@media screen and (max-width: 768px)
  .calendar-container
    mat-card
      .calendar-header
        padding: var(--spacing-md)

        .calendar-controls
          flex-wrap: wrap
          height: auto
          gap: var(--spacing-md)

          .actions-section
            width: 100%
            justify-content: space-between
            margin: 0

      .calendar-content
        padding: var(--spacing-md)

@media screen and (max-width: 600px)
  .calendar-container
    mat-card
      .calendar-header
        padding: var(--spacing-sm)

        .calendar-controls
          gap: var(--spacing-sm)

          .timezone-select
            width: 100%
            
            .dense-field
              width: 100%

          .nav-section
            width: 100%
            justify-content: space-between

            .current-date
              text-align: center
              flex: 1

      .calendar-content
        padding: var(--spacing-sm)

        .calendar-grid
          .calendar-header
            .header-cell
              padding: 2px var(--spacing-xs)
              font-size: 10px

          .calendar-body
            .time-slots
              width: 40px

              .time-slot
                font-size: 10px
                padding: 2px

            .week-grid
              .day-column
                .time-slot
                  .appointment
                    padding: 2px
                    font-size: 10px
