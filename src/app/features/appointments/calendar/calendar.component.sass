@use '@angular/material' as mat
@import '../../../styles/mixins'
@import '../../../styles/grid-mixins'

.calendar-container
  @include card-container
  height: calc(100vh - 100px)
  max-width: 100%
  overflow: hidden

  mat-card
    @include base-card
    padding: 0
    height: 100%
    display: flex
    flex-direction: column
    overflow: hidden

    .calendar-header
      flex-shrink: 0
      padding: var(--spacing-md)
      border-bottom: 1px solid var(--border-color)
      background: white
      z-index: 2

      .calendar-controls
        display: flex
        align-items: center
        justify-content: space-between
        gap: var(--spacing-lg)
        flex-wrap: wrap

        .date-nav
          display: flex
          align-items: center
          gap: var(--spacing-sm)
          min-width: 200px

          .current-period
            display: flex
            flex-direction: column
            align-items: center

            .month
              font-size: var(--font-size-lg)
              font-weight: var(--font-weight-medium)
              color: var(--text-primary)
              line-height: 1.2

            .year
              font-size: var(--font-size-sm)
              color: var(--text-secondary)

        .view-controls
          .mat-button-toggle-group
            height: 36px
            border: 1px solid var(--border-color)
            border-radius: var(--border-radius)
            overflow: hidden

            .mat-button-toggle
              height: 36px
              padding: 0 var(--spacing-md)
              display: inline-flex
              align-items: center
              
              .mat-icon
                font-size: 20px
                height: 20px
                width: 20px
                margin-right: var(--spacing-xs)

              .view-text
                font-size: var(--font-size-sm)

        .new-appointment-btn
          height: 36px
          padding: 0 var(--spacing-md)
          display: inline-flex
          align-items: center
          gap: var(--spacing-xs)

    .calendar-content
      flex: 1
      overflow: hidden
      position: relative
      padding: var(--spacing-sm)

      .calendar-scroll-container
        height: 100%
        overflow: auto
        @include hide-scrollbar
        border: 1px solid var(--border-color)
        border-radius: var(--border-radius)

        .calendar-grid
          border-collapse: collapse
          width: 100%
          min-width: 800px
          background: white

          thead
            position: sticky
            top: 0
            z-index: 1
            background: white
            height: 60px

            tr
              th
                border: 1px solid var(--border-color)
                background: var(--background-light)
                padding: var(--spacing-sm)
                text-align: center
                vertical-align: middle
                min-width: 120px

                &.time-header
                  width: 80px
                  min-width: 80px
                  background: var(--background-light)
                  border-right: 2px solid var(--border-color)

                .day-name
                  display: block
                  font-size: var(--font-size-sm)
                  color: var(--text-secondary)
                  margin-bottom: 4px

                .day-date
                  display: block
                  font-size: var(--font-size-lg)
                  font-weight: var(--font-weight-bold)
                  color: var(--text-primary)

          tbody
            tr
              td
                border: 1px solid var(--border-color)
                height: 60px
                padding: 0

                &.time-cell
                  width: 80px
                  min-width: 80px
                  font-size: var(--font-size-xs)
                  color: var(--text-secondary)
                  text-align: center
                  vertical-align: middle
                  background: var(--background-light)
                  border-right: 2px solid var(--border-color)

                &.calendar-cell
                  position: relative
                  background: white
                  min-width: 120px

                  &:hover
                    background: var(--hover-color)
                    cursor: pointer

                  .appointment
                    position: absolute
                    top: 2px
                    left: 2px
                    right: 2px
                    padding: var(--spacing-xs)
                    border-radius: 4px
                    background: #ffd6d1
                    border: 1px solid darken(#ffd6d1, 10%)
                    font-size: var(--font-size-xs)

                    .event-title
                      font-weight: var(--font-weight-medium)
                      margin-bottom: 2px
                      @include text-truncate

                    .event-time
                      font-size: 10px
                      color: var(--text-secondary)

@media screen and (max-width: 768px)
  .calendar-container
    mat-card
      .calendar-header
        padding: var(--spacing-sm)

        .calendar-controls
          gap: var(--spacing-sm)

          .date-nav
            order: -1
            width: 100%
            justify-content: center
            margin-bottom: var(--spacing-sm)

          .view-controls
            .mat-button-toggle
              padding: 0 var(--spacing-xs)

              .view-text
                display: none

          .new-appointment-btn
            .btn-text
              display: none

      .calendar-content
        padding: var(--spacing-xs)

        .calendar-scroll-container
          .calendar-grid
            min-width: 600px

            thead th
              min-width: 90px

              &.time-header
                width: 50px
                min-width: 50px

              .day-name
                font-size: var(--font-size-xs)

              .day-date
                font-size: var(--font-size-sm)

            tbody
              td
                &.time-cell
                  width: 50px
                  min-width: 50px
                  font-size: 10px

                &.calendar-cell
                  min-width: 90px
                  height: 50px

@media screen and (max-width: 600px)
  .calendar-container
    padding: var(--spacing-xs)

    mat-card
      .calendar-content
        .calendar-scroll-container
          .calendar-grid
            min-width: 480px

            thead th
              min-width: 70px
              padding: 4px 2px

              &.time-header
                width: 40px
                min-width: 40px

            tbody td
              &.time-cell
                width: 40px
                min-width: 40px

              &.calendar-cell
                min-width: 70px
                padding: 2px

                .appointment
                  font-size: 10px
