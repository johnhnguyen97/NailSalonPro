@use '../../../styles/mixins' as mixins
@use '../../../styles/settings-mixins' as settings

.clients-container
  padding: 12px
  width: 100%
  max-width: 100%
  min-height: 0
  overflow: hidden
  display: flex
  flex-direction: column
  
  mat-card
    padding: 0
    border-radius: 8px
    overflow: hidden
    background: var(--background-light)
    flex: 1
    min-height: 0
    display: flex
    flex-direction: column
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12)

.card-header
  padding: 12px 16px
  border-bottom: 1px solid var(--border-color)
  flex-shrink: 0

  .header-title
    display: flex
    align-items: center
    justify-content: space-between
    margin-bottom: 12px

    h2
      margin: 0
      font-size: 1.15rem
      font-weight: 500
    
    .total-clients
      color: var(--text-secondary)
      font-size: 0.75rem

.controls-container
  display: flex
  flex-direction: column
  gap: 12px
  flex-shrink: 0

  .search-box
    display: flex
    align-items: center
    background: var(--background-paper)
    border: 1px solid var(--border-color)
    border-radius: 20px
    padding: 0 8px
    height: 36px
    width: 100%
    max-width: 300px
    transition: all 0.2s ease
    
    &:focus-within
      border-color: var(--primary)
      box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.1)
      transform: translateY(-1px)

    mat-icon
      color: var(--text-secondary)
      margin-right: 8px
      font-size: 18px
      width: 18px
      height: 18px

    input
      border: none
      outline: none
      background: none
      width: 100%
      font-size: 0.813rem
      color: var(--text-primary)
      padding: 0
      
      &::placeholder
        color: var(--text-secondary)

    .clear-button
      margin-right: -4px
      width: 24px
      height: 24px
      line-height: 24px
      opacity: 0.7
      transition: opacity 0.2s ease
      
      &:hover
        opacity: 1
      
      mat-icon
        font-size: 16px
        width: 16px
        height: 16px
        margin: 0

  .filter-controls
    display: flex
    align-items: center
    justify-content: flex-start
    gap: 8px
    flex-wrap: wrap

    .filter-group, .sort-group
      display: flex
      gap: 4px

    .filter-button
      height: 28px
      line-height: 28px
      padding: 0 10px
      border-radius: 14px
      font-size: 0.75rem
      background: var(--background-paper)
      border: 1px solid var(--border-color)
      color: var(--text-primary)

      mat-icon
        font-size: 16px
        width: 16px
        height: 16px
        margin-right: 4px
        opacity: 0.7

      &:hover
        background: var(--hover-color)

.table-section
  padding: 12px
  padding-top: 8px
  flex: 1
  min-height: 0
  display: flex
  flex-direction: column
  overflow: hidden

  .table-card
    border-radius: 8px
    background: var(--background-paper)
    flex: 1
    min-height: 0
    display: flex
    flex-direction: column
    position: relative
    box-shadow: none
    border: 1px solid var(--border-color)
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05)

.table-container
  position: relative
  flex: 1
  min-height: 0
  display: flex
  flex-direction: column
  overflow: hidden

  .table-scroll-container
    overflow: auto
    margin: 0
    border-radius: 8px 8px 0 0
    flex: 1
    min-height: 0
    position: relative
    width: 100%

    &::-webkit-scrollbar
      height: 6px
      width: 6px
    
    &::-webkit-scrollbar-track
      background: var(--background-light)
    
    &::-webkit-scrollbar-thumb
      background: var(--border-color)
      border-radius: 3px

    table
      width: 100%
      min-width: fit-content
      border-collapse: collapse
      font-size: 0.75rem
      table-layout: fixed
      background: var(--background-paper)

      th, td
        padding: 8px 12px
        text-align: left
        line-height: 1.3
        border-bottom: 1px solid var(--border-color)
        overflow: hidden
        text-overflow: ellipsis
        white-space: nowrap
        height: 48px
        display: table-cell
        vertical-align: middle

        &:first-child
          padding-left: 12px
        
        &:last-child
          padding-right: 12px

      th
        font-weight: 500
        color: var(--text-secondary)
        background: var(--background-light)
        position: sticky
        top: 0
        z-index: 1
        font-size: 0.688rem
        text-transform: uppercase
        letter-spacing: 0.3px
        border-top: none
        height: 40px
        box-shadow: inset 0 -1px 0 var(--border-color)

      tr:last-child td
        border-bottom: none

      tr:hover td
        background: var(--hover-color)

      .mat-column-name
        font-weight: 500

      .mat-column-email
        color: var(--text-secondary)
        font-size: 0.688rem

      .mat-column-phone
        font-family: monospace
        letter-spacing: -0.3px

      .mat-column-id
        text-align: center

        .action-button
          margin: 0
          padding: 0
          width: 32px
          height: 32px
          line-height: 32px

          mat-icon
            font-size: 18px
            width: 18px
            height: 18px
            line-height: 18px

.status-badge
  padding: 1px 6px
  border-radius: 10px
  font-size: 0.688rem
  font-weight: 500
  text-transform: capitalize
  letter-spacing: 0.3px
  display: inline-flex
  align-items: center
  justify-content: center
  min-width: 60px
  height: 20px
  
  &.active
    background-color: rgba(var(--success-rgb), 0.1)
    color: var(--success)
  
  &.inactive
    background-color: rgba(var(--error-rgb), 0.1)
    color: var(--error)
  
  &.new
    background-color: rgba(var(--info-rgb), 0.1)
    color: var(--info)

mat-paginator
  position: sticky
  bottom: 0
  z-index: 1
  background: var(--background-paper)
  border-top: 1px solid var(--border-color)
  flex-shrink: 0

// Mobile styles
@media (max-width: 768px)
  .clients-container
    padding: 8px
    
    mat-card
      border-radius: 6px
      box-shadow: none
      border: 1px solid var(--border-color)
      background: var(--background-paper)
  
  .card-header
    padding: 8px 12px
    background: var(--background-light)

    .header-title
      margin-bottom: 8px
      
      h2
        font-size: 1rem
        color: var(--text-primary)

  .controls-container
    gap: 8px
    padding: 4px 8px 8px
    background: var(--background-paper)

    .search-box
      max-width: 100%
      height: 32px
      border-radius: 16px
      background: var(--background-light)
      
      input
        font-size: 0.75rem

      mat-icon
        font-size: 16px
        width: 16px
        height: 16px

    .filter-controls
      .filter-group, .sort-group
        flex: 1
        justify-content: flex-start
      
      .filter-button
        flex: 1
        min-width: 0
        padding: 0 8px
        height: 28px
        line-height: 28px
        border-radius: 14px
        background: var(--background-light)

        span
          display: none
        
        mat-icon
          margin: 0

  .table-section
    padding: 0
    margin-top: 0

    .table-card
      border-radius: 0
      border: none
      border-top: 1px solid var(--border-color)
      box-shadow: none

  .table-container
    .table-scroll-container
      border-radius: 0
      overflow-x: auto
      overflow-y: auto
      width: 100%
      background: var(--background-paper)
      
      table
        font-size: 0.688rem
        border: none

        th
          padding: 8px
          font-size: 0.625rem
          height: 32px
          background: var(--background-light)
          white-space: nowrap
          letter-spacing: 0.5px
          color: var(--text-secondary)
          border-bottom: 1px solid var(--border-color)
          box-shadow: none

        td
          padding: 8px
          font-size: 0.75rem
          background: var(--background-paper)
          border-bottom: 1px solid var(--border-color-light)
          height: 40px

        th, td
          &:first-child
            padding-left: 12px
          
          &:last-child
            padding-right: 12px

        tr:hover td
          background: var(--hover-color)

  .status-badge
    padding: 2px 8px
    font-size: 0.625rem
    width: fit-content
    min-width: 60px
    height: 18px
    border-radius: 9px

  mat-paginator
    border-top: 1px solid var(--border-color)
    background: var(--background-light)
    
    ::ng-deep
      .mat-mdc-paginator-container
        padding: 0 8px
        min-height: 40px
        
      .mat-mdc-paginator-range-label
        margin: 0 8px
        font-size: 0.75rem
